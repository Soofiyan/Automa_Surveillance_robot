<?xml version="1.0" encoding="utf-8"?>

<robot name="asb">  
  
  <!-- .............................................................................................. -->
  <link
    name="base_link">
    <inertial>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <mass
        value="3" />
      <inertia
        ixx="0.0013934"
        ixy="3.9715E-08"
        ixz="2.6411E-09"
        iyy="0.00098223"
        iyz="-1.5817E-07"
        izz="0.0011147" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file:///home/adil/sim_ws/src/gazebo_sim/meshes/base_link.dae" />
      </geometry>
    </visual>
    
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file:///home/adil/sim_ws/src/gazebo_sim/meshes/base_link.dae" />
      </geometry>
    </collision>

  </link>
 <!-- .............................................................................................. -->

 <!-- .............................................................................................. -->
  <link
    name="wheel_Link2">
    <inertial>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <mass
        value="0.25" />
      <inertia
        ixx="0.00053956"
        ixy="-1.8621E-11"
        ixz="4.2809E-12"
        iyy="0.0002757"
        iyz="4.6146E-11"
        izz="0.0002757" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file:///home/adil/sim_ws/src/gazebo_sim/meshes/wheel1.dae" />
      </geometry>
    </visual>
    
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file:///home/adil/sim_ws/src/gazebo_sim/meshes/wheel1.dae" />
      </geometry>
    </collision>

  </link>
  
  <!-- .............................................................................................. -->
  <joint
    name="wheel2"
    type="continuous">
    <origin
      xyz="-0.101 0 0"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="wheel_Link2" />
    <axis
      xyz="1 0 0" />
    <limit
      effort="10000"
      velocity="500" />
    
  </joint>
  
<!-- .............................................................................................. -->  
  
  <!-- .............................................................................................. -->
   
   <link
    name="wheel_Link1">
    <inertial>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <mass
        value="0.25" />
      <inertia
        ixx="0.00053956"
        ixy="-1.8621E-11"
        ixz="4.2809E-12"
        iyy="0.0002757"
        iyz="4.6146E-11"
        izz="0.0002757" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file:///home/adil/sim_ws/src/gazebo_sim/meshes/wheel1.dae" />
      </geometry>
    </visual>

    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file:///home/adil/sim_ws/src/gazebo_sim/meshes/wheel1.dae" />
      </geometry>
    </collision>
    
  </link>
  
  <!-- .............................................................................................. -->
  <joint
    name="wheel1"
    type="continuous">
    <origin
      xyz="0.103 0 0"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="wheel_Link1" />
    <axis
      xyz="1 0 0" />
    <limit
      effort="10000"
      velocity="500" />

  </joint>
<!-- .............................................................................................. -->
<link name="imu">
       <inertial>
         <origin xyz="0 0 0.5" rpy="0 0 0"/>
         <mass value="0.001"/>
         <inertia ixx="0"  ixy="0"  ixz="0" iyy="100" iyz="0" izz="0" />
       </inertial>
    
       <visual>
         <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <box size="0.01 0.01 0.01" />
        </geometry>
        <material name="Cyan">
          <color rgba="0 1.0 1.0 1.0"/>
        </material>
      </visual>
</link>
<!-- .............................................................................................. -->
<gazebo reference="imu">
    <gravity>true</gravity>
    <sensor name="imu_sensor" type="imu">
      <always_on>true</always_on>
      <update_rate>100</update_rate>
      <visualize>true</visualize>
      <topic>__default_topic__</topic>
      <plugin filename="libgazebo_ros_imu_sensor.so" name="imu_plugin">
        <topicName>imu</topicName>
        <bodyName>imu</bodyName>
        <updateRateHZ>10.0</updateRateHZ>
        <gaussianNoise>0.0</gaussianNoise>
        <xyzOffset>0 0 0</xyzOffset>
        <rpyOffset>0 0 0</rpyOffset>
        <frameName>imu_link</frameName>
      </plugin>
      <pose>0 0 0 0 0 0</pose>
    </sensor>
  </gazebo>

<!-- .............................................................................................. -->

<joint
    name="imu"
    type="fixed">
    <origin
      xyz="0 0 0.04"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="imu" />
  </joint>

<!-- .............................................................................................. -->


    <gazebo reference = "wheel_Link1">
    	<material>Gazebo/Black</material>
      <mu1 value="-80"/>
      <mu2 value="-80"/>
    </gazebo>
    <gazebo reference = "wheel_Link2">
    	<material>Gazebo/Black</material>
      <mu1 value="-80"/>
      <mu2 value="-80"/>
    </gazebo>
    <gazebo>
    	<plugin name="differential_drive_controller" filename="libgazebo_ros_diff_drive.so">
      	<legacyMode>false</legacyMode>
      	<alwaysOn>true</alwaysOn>
      	<updateRate>10</updateRate>
      	<leftJoint>wheel1</leftJoint>
      	<rightJoint>wheel2</rightJoint>
      	<wheelSeparation>0.204</wheelSeparation>
      	<wheelDiameter>0.150</wheelDiameter>
      	<torque>2</torque>
      	<commandTopic>cmd_vel</commandTopic>
      	<odometryTopic>odom</odometryTopic>
      	<odometryFrame>odom</odometryFrame>
      	<robotBaseFrame>base_link</robotBaseFrame>

    </plugin>
  </gazebo>

<!-- .............................................................................................. -->

</robot>